<!DOCTYPE html>

<html>
<head>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v7.0.0/dist/aframe-extras.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<style>
        html, body {
            margin: 0;
            padding: 0;
            overflow: auto;
            height: 100%;
            width: 100%;
            background: black;
        }

        .a-enter-vr-button {
            display: none !important;
        }

        #bottom-ui {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 50px 50px;
            box-sizing: border-box;
            z-index: 5;
            display: none;
        }

        .scroll-arrow {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            width: 60px;
            height: 60px;
            font-size: 28px;
            color: white;
            background: rgba(0, 0, 0, 0.6);
            cursor: pointer;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            user-select: none;
            z-index: 10;
            opacity: 0;
            pointer-events: none;
            border: 2px solid rgba(255, 255, 255, 0.3);
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            outline: none;
        }

        .scroll-arrow.active {
            opacity: 1;
            pointer-events: all;
        }

        #scroll-left {
            left: 15px;
        }

        #scroll-right {
            right: 15px;
        }

        #model-info {
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding-top: 20px;
            gap: 5px;
            max-width: 100%;
        }

        #model-name {
            font-family: 'Arial', sans-serif;
            color: white;
            font-size: 30px;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            white-space: nowrap;
            overflow: auto;
            text-overflow: ellipsis;
            max-width: 80vw;
        }

        #model-price {
            font-family: 'Arial', sans-serif;
            border-radius: 6px;
            color: white;
            background-color: rgba(30, 144, 255, 0.7);
            font-size: 30px;
            min-width: 100px;
            height: 36px;
            line-height: 36px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            padding: 0 15px;
        }

        a-scene {
            background: linear-gradient(to bottom, #FFFFFF, #808080);
            display: block;
            opacity: 0;
            transition: opacity 0.5s ease;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        a-scene.active {
            opacity: 1;
        }

        #loading-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding-top: 20px;
            z-index: 10;
            color: white;
            font-family: 'Arial', sans-serif;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        #loading-text {
            margin-top: 10px;
            font-size: 16px;
            text-align: center;
        }

        #welcome-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            overflow: auto;
            background: url('1.jpg') no-repeat center center;
            background-size: cover;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding-top: 20px;
            z-index: 20;
            color: white;
            font-family: 'Arial', sans-serif;
        }

        /* Logo container styles */
        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }

        .logo-name {
            font-family: 'Arial', sans-serif;
            color: white;
            font-size: 24px;
            font-weight: bold;
            margin-top: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        /* Button Grid Layout */
        .button-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            grid-auto-rows: 1fr;
            gap: 16px; /* Equal spacing horizontally and vertically */
            padding: 16px;
            width: 100%;
            box-sizing: border-box;
        }
        
        .grid-button {
            aspect-ratio: 1 / 1; /* Force perfect square */
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px;
            padding: 8px;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .button-icon,
        .grid-button svg {
            width: 70%;
            height: 70%;
            object-fit: contain;
            display: block;
            margin: 0 auto;
        }

        .grid-button * {
            pointer-events: none;
        }
        .grid-button {
            pointer-events: auto;
        }
        #logo {
            max-width: 180px;
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            .button-container {
                grid-template-columns: repeat(3, 1fr); /* ✅ Fix: Force 3 buttons on small screens too */
            }
        }

        /* Back button styles */
        #back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 80px;
            height: 40px;
            font-size: 16px;
            font-weight: bold;
            color: white;
            background: rgba(0, 0, 0, 0.6);
            cursor: pointer;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            user-select: none;
            z-index: 15;
            opacity: 0;
            pointer-events: none;
            border: 2px solid rgba(255, 255, 255, 0.3);
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            outline: none;
            text-transform: uppercase;
        }
        
        #back-button.active {
            opacity: 1;
            pointer-events: all;
        }

    
#scroll-wrapper {
    height: 100vh;
    overflow: hidden;
}

html, body {
    overflow: hidden;
    overscroll-behavior: none;
    touch-action: none;
    height: 100%;
    margin: 0;
    padding: 0;
}

</style>
    <meta content="yes" name="apple-mobile-web-app-capable"/><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/></head>
    <body><div id="scroll-wrapper">
    <div id="welcome-screen">
    <div class="logo-container">
    <img alt="Logo" id="logo" src="logo.png"/>
    <div class="logo-name">The Artisan's Table</div>
    </div>
    <div class="button-container">
    <button class="grid-button" id="whatsapp-button">
    <svg class="mx-auto mb-1 h-20 w-20 drop-shadow-xl" fill="none" height="80" viewbox="0 0 80 80" width="80" xmlns="http://www.w3.org/2000/svg"><path d="M64.7204 77.9004C47.9569 79.6896 31.1426 79.6896 14.3791 77.9004C7.69471 77.187 2.41504 71.9073 1.70164 65.2224C-0.0875567 48.4589 -0.0875567 31.6451 1.70164 14.8816C2.41504 8.19727 7.69471 2.9176 14.3791 2.2042C31.1426 0.415007 47.9563 0.415007 64.7198 2.2042C71.4048 2.9176 76.6844 8.19727 77.3978 14.8816C79.187 31.6451 79.187 48.4589 77.3978 65.2224C76.6844 71.9073 71.4054 77.187 64.7204 77.9004Z" fill="url(#paint0_linear_2307_926)"></path><path d="M16.7455 62.8543L20.0026 50.9618C17.9937 47.4816 16.9368 43.5331 16.9381 39.4882C16.9433 26.8339 27.2413 16.5388 39.8961 16.5388C46.0371 16.5418 51.801 18.9317 56.1361 23.2697C60.4699 27.6078 62.8563 33.3739 62.8541 39.5067C62.8485 52.1602 52.5487 62.457 39.8961 62.457C39.8952 62.457 39.8971 62.457 39.8961 62.457H39.8862C36.0443 62.4554 32.2691 61.4917 28.9157 59.6629L16.7455 62.8543Z" fill="white"></path><path d="M39.9029 20.416C29.3774 20.416 20.8177 28.9726 20.8138 39.4899C20.8123 43.094 21.8209 46.6044 23.7309 49.6418L24.185 50.3634L22.2568 57.4021L29.4789 55.5085L30.1763 55.9217C33.1053 57.6601 36.4634 58.5794 39.8883 58.5811H39.8955C50.4129 58.5811 58.9725 50.0236 58.9768 39.5054C58.9787 34.4084 56.996 29.6154 53.3932 26.01C49.7904 22.4046 44.9999 20.4182 39.9029 20.416Z" fill="url(#paint1_linear_2307_926)"></path><path clip-rule="evenodd" d="M34.1586 29.8931C33.7286 28.9381 33.2762 28.9188 32.8678 28.902C32.5332 28.8878 32.1505 28.8887 31.7683 28.8887C31.3856 28.8887 30.7643 29.0323 30.2388 29.6063C29.713 30.1803 28.2308 31.5679 28.2308 34.3903C28.2308 37.2127 30.2866 39.9396 30.5729 40.3227C30.8597 40.7054 34.5412 46.6822 40.3722 48.9813C45.2177 50.8921 46.2036 50.512 47.2558 50.4166C48.3075 50.3211 50.6496 49.029 51.1273 47.6896C51.6055 46.3502 51.6055 45.2026 51.4623 44.9627C51.3187 44.7232 50.9364 44.58 50.3624 44.2932C49.7888 44.0064 46.9686 42.6184 46.4427 42.4271C45.9168 42.2357 45.5346 42.1403 45.1519 42.7143C44.7696 43.2883 43.671 44.58 43.3361 44.9627C43.0016 45.3458 42.667 45.3935 42.093 45.1067C41.5194 44.8191 39.6718 44.2141 37.4802 42.2598C35.7749 40.7394 34.6238 38.8617 34.2888 38.2876C33.9543 37.7136 34.2532 37.4032 34.5408 37.1172C34.7984 36.8601 35.1144 36.4473 35.4016 36.1124C35.6876 35.7774 35.7835 35.5383 35.9744 35.1561C36.1657 34.773 36.0703 34.438 35.9266 34.1512C35.7835 33.8644 34.6685 31.0274 34.1586 29.8931Z" fill="white" fill-rule="evenodd"></path><defs><lineargradient gradientunits="userSpaceOnUse" id="paint0_linear_2307_926" x1="38.7519" x2="39.1493" y1="5.56595" y2="72.5462"><stop stop-color="#57D163"></stop><stop offset="1" stop-color="#23B33A"></stop></lineargradient><lineargradient gradientunits="userSpaceOnUse" id="paint1_linear_2307_926" x1="39.5069" x2="39.7004" y1="22.7063" y2="55.3206"><stop stop-color="#57D163"></stop><stop offset="1" stop-color="#23B33A"></stop></lineargradient></defs></svg>
                    WhatsApp
                </button>
    <button class="grid-button" id="menu-3d-button">
    <img alt="Menu" class="button-icon" src="3DMenuicon.png"/>
                    3D Menu
                </button>
    <button class="grid-button" id="view-pdf-button">
    <img alt="Menu" class="button-icon" src="logo.png"/>
                    Menu
                </button>
    <button class="grid-button" id="instagram-button">
    <svg class="mx-auto mb-1 h-20 w-20 drop-shadow-xl" fill="none" height="80" viewbox="0 0 80 80" width="80" xmlns="http://www.w3.org/2000/svg"><path d="M65.1859 77.7432C48.4224 79.5324 31.608 79.5324 14.8445 77.7432C8.16016 77.0298 2.88049 71.7501 2.16709 65.0652C0.377897 48.3016 0.377897 31.4879 2.16709 14.7244C2.88049 8.04005 8.16016 2.76038 14.8445 2.04697C31.608 0.25778 48.4218 0.25778 65.1853 2.04697C71.8702 2.76038 77.1499 8.04005 77.8633 14.7244C79.6525 31.4879 79.6525 48.3016 77.8633 65.0652C77.1499 71.7501 71.8708 77.0298 65.1859 77.7432Z" fill="url(#paint0_radial_467_8740)"></path><path d="M65.1859 77.7432C48.4224 79.5324 31.608 79.5324 14.8445 77.7432C8.16016 77.0298 2.88049 71.7501 2.16709 65.0652C0.377897 48.3016 0.377897 31.4879 2.16709 14.7244C2.88049 8.04005 8.16016 2.76038 14.8445 2.04697C31.608 0.25778 48.4218 0.25778 65.1853 2.04697C71.8702 2.76038 77.1499 8.04005 77.8633 14.7244C79.6525 31.4879 79.6525 48.3016 77.8633 65.0652C77.1499 71.7501 71.8708 77.0298 65.1859 77.7432Z" fill="url(#paint1_radial_467_8740)"></path><path d="M40.0177 12.106C32.277 12.106 31.3055 12.1398 28.2653 12.2782C25.231 12.4171 23.1599 12.8975 21.3476 13.6023C19.473 14.3303 17.8828 15.3041 16.2986 16.8889C14.7131 18.4731 13.7393 20.0633 13.009 21.9373C12.3023 23.7501 11.8214 25.8219 11.6848 28.8549C11.5488 31.8951 11.5132 32.8672 11.5132 40.6078C11.5132 48.3484 11.5476 49.3169 11.6854 52.3571C11.8249 55.3913 12.3053 57.4624 13.0095 59.2747C13.7381 61.1493 14.712 62.7394 16.2968 64.3237C17.8804 65.9091 19.4706 66.8853 21.344 67.6132C23.1575 68.3181 25.2292 68.7984 28.2629 68.9374C31.3032 69.0757 32.274 69.1096 40.0141 69.1096C47.7554 69.1096 48.7239 69.0757 51.7641 68.9374C54.7984 68.7984 56.8719 68.3181 58.6854 67.6132C60.5594 66.8853 62.1472 65.9091 63.7308 64.3237C65.3163 62.7394 66.2901 61.1493 67.0205 59.2753C67.7211 57.4624 68.2021 55.3907 68.3446 52.3577C68.4812 49.3175 68.5168 48.3484 68.5168 40.6078C68.5168 32.8672 68.4812 31.8957 68.3446 28.8555C68.2021 25.8213 67.7211 23.7501 67.0205 21.9379C66.2901 20.0633 65.3163 18.4731 63.7308 16.8889C62.1454 15.3035 60.56 14.3297 58.6836 13.6023C56.8666 12.8975 54.7942 12.4171 51.7599 12.2782C48.7197 12.1398 47.7518 12.106 40.0088 12.106H40.0177ZM37.4608 17.2422C38.2197 17.241 39.0664 17.2422 40.0177 17.2422C47.6277 17.2422 48.5297 17.2695 51.5349 17.4061C54.3139 17.5332 55.8221 17.9975 56.8268 18.3876C58.1569 18.9042 59.1052 19.5218 60.1022 20.5193C61.0997 21.5169 61.7173 22.467 62.2351 23.797C62.6252 24.8005 63.0901 26.3088 63.2166 29.0877C63.3532 32.0923 63.3829 32.9948 63.3829 40.6012C63.3829 48.2077 63.3532 49.1102 63.2166 52.1148C63.0895 54.8937 62.6252 56.4019 62.2351 57.4054C61.7185 58.7355 61.0997 59.6826 60.1022 60.6796C59.1046 61.6772 58.1575 62.2947 56.8268 62.8113C55.8233 63.2032 54.3139 63.6663 51.5349 63.7934C48.5303 63.93 47.6277 63.9597 40.0177 63.9597C32.407 63.9597 31.505 63.93 28.5004 63.7934C25.7215 63.6651 24.2133 63.2008 23.208 62.8107C21.8779 62.2941 20.9278 61.6766 19.9302 60.679C18.9326 59.6814 18.3151 58.7337 17.7973 57.4031C17.4072 56.3996 16.9422 54.8913 16.8158 52.1124C16.6792 49.1078 16.6519 48.2053 16.6519 40.5941C16.6519 32.9829 16.6792 32.0851 16.8158 29.0806C16.9428 26.3016 17.4072 24.7934 17.7973 23.7887C18.3139 22.4586 18.9326 21.5086 19.9302 20.511C20.9278 19.5135 21.8779 18.8959 23.208 18.3781C24.2127 17.9862 25.7215 17.5231 28.5004 17.3954C31.1298 17.2767 32.1487 17.241 37.4608 17.2351V17.2422ZM55.2319 21.9747C53.3436 21.9747 51.8116 23.5049 51.8116 25.3937C51.8116 27.282 53.3436 28.814 55.2319 28.814C57.1201 28.814 58.6521 27.282 58.6521 25.3937C58.6521 23.5055 57.1201 21.9735 55.2319 21.9735V21.9747ZM40.0177 25.9709C31.9344 25.9709 25.3806 32.5245 25.3806 40.6078C25.3806 48.691 31.9344 55.2417 40.0177 55.2417C48.101 55.2417 54.6523 48.691 54.6523 40.6078C54.6523 32.5245 48.1004 25.9709 40.0171 25.9709H40.0177ZM40.0177 31.1072C45.2644 31.1072 49.5184 35.3605 49.5184 40.6078C49.5184 45.8545 45.2644 50.1084 40.0177 50.1084C34.7703 50.1084 30.517 45.8545 30.517 40.6078C30.517 35.3605 34.7703 31.1072 40.0177 31.1072Z" fill="white"></path><defs><radialgradient cx="0" cy="0" gradienttransform="translate(21.645 85.122) rotate(-90) scale(77.6804 72.2489)" gradientunits="userSpaceOnUse" id="paint0_radial_467_8740" r="1"><stop stop-color="#FFDD55"></stop><stop offset="0.1" stop-color="#FFDD55"></stop><stop offset="0.5" stop-color="#FF543E"></stop><stop offset="1" stop-color="#C837AB"></stop></radialgradient><radialgradient cx="0" cy="0" gradienttransform="translate(-12.3039 6.35144) rotate(78.6806) scale(34.7234 143.132)" gradientunits="userSpaceOnUse" id="paint1_radial_467_8740" r="1"><stop stop-color="#3771C8"></stop><stop offset="0.128" stop-color="#3771C8"></stop><stop offset="1" stop-color="#6600FF" stop-opacity="0"></stop></radialgradient></defs></svg>
                    Instagram
                </button>
    <button class="grid-button" id="mail-button">
    <svg class="mx-auto mb-1 h-20 w-20 drop-shadow-xl" fill="none" height="80" viewbox="0 0 80 80" width="80" xmlns="http://www.w3.org/2000/svg"><path d="M64.8604 77.7979C48.0969 79.5871 31.2826 79.5871 14.5191 77.7979C7.83472 77.0845 2.55505 71.8048 1.84165 65.1198C0.0524579 48.3563 0.0524579 31.5426 1.84165 14.7791C2.55505 8.09473 7.83472 2.81506 14.5191 2.10166C31.2826 0.312468 48.0963 0.312468 64.8598 2.10166C71.5448 2.81506 76.8245 8.09473 77.5379 14.7791C79.327 31.5426 79.327 48.3563 77.5379 65.1198C76.8245 71.8048 71.5454 77.0845 64.8604 77.7979Z" fill="url(#paint0_linear_2307_933)"></path><path d="M18.7524 24.9863C18.3684 24.9863 18.0067 25.0508 17.6644 25.1834L24.5212 32.0555L31.4539 39.0507L31.5804 39.1985L31.7828 39.3956L31.9853 39.5926L32.3901 40.0114L38.336 45.9475C38.435 46.0074 38.7219 46.2661 38.9461 46.3752C39.2348 46.5156 39.5477 46.6451 39.8703 46.6563C40.2184 46.6685 40.5741 46.5714 40.8874 46.4231C41.1219 46.312 41.2262 46.1528 41.4988 45.9475L48.3809 39.0261L55.3389 32.0555L62.0439 25.3312C61.6134 25.1041 61.1367 24.9863 60.627 24.9863H18.7524ZM16.6523 25.8238C15.9211 26.4983 15.4631 27.5122 15.4631 28.6564V51.2186C15.4631 52.145 15.7688 52.9865 16.2728 53.6324L17.2343 52.7457L24.3947 45.9721L30.7455 39.9867L30.619 39.8389L23.6609 32.8683L16.7029 25.8731L16.6523 25.8238ZM62.9548 26.0455L56.1739 32.8683L49.2411 39.8389L49.1146 39.9621L55.7184 46.1938L62.8788 52.9674L63.309 53.3615C63.6945 52.7593 63.9162 52.0175 63.9162 51.2186V28.6564C63.9162 27.6362 63.5531 26.7111 62.9548 26.0455ZM31.5551 40.7996L25.2297 46.7849L18.0439 53.5585L17.1331 54.4206C17.6133 54.7217 18.1597 54.9132 18.7524 54.9132H60.627C61.3394 54.9132 61.9857 54.6464 62.5246 54.2236L62.0692 53.7802L54.8835 47.0066L48.2797 40.7996L42.3337 46.7603C42.0119 46.968 41.7969 47.1984 41.4826 47.3398C40.9769 47.5675 40.4227 47.7601 39.8655 47.7518C39.3069 47.7434 38.7592 47.5306 38.2579 47.2906C38.0063 47.1701 37.8721 47.0503 37.577 46.8096L31.5551 40.7996Z" fill="white"></path><defs><lineargradient gradientunits="userSpaceOnUse" id="paint0_linear_2307_933" x1="40.2385" x2="40.3148" y1="78.8252" y2="1.706"><stop stop-color="#70EFFF"></stop><stop offset="1" stop-color="#5770FF"></stop></lineargradient></defs></svg>
                    Mail
                </button>
    <button class="grid-button" id="call-button">
    <svg class="mx-auto mb-1 h-20 w-20 drop-shadow-xl" fill="none" height="80" viewbox="0 0 80 80" width="80" xmlns="http://www.w3.org/2000/svg"><path d="M64.7204 77.7979C47.9569 79.5871 31.1426 79.5871 14.3791 77.7979C7.69471 77.0845 2.41504 71.8048 1.70164 65.1198C-0.0875567 48.3563 -0.0875567 31.5426 1.70164 14.7791C2.41504 8.09473 7.69471 2.81506 14.3791 2.10166C31.1426 0.312468 47.9563 0.312468 64.7198 2.10166C71.4048 2.81506 76.6844 8.09473 77.3978 14.7791C79.187 31.5426 79.187 48.3563 77.3978 65.1198C76.6844 71.8048 71.4054 77.0845 64.7204 77.7979Z" fill="url(#paint0_linear_2307_1533)"></path><path d="M29.1143 35.8341C30.6764 38.652 32.4768 41.3564 34.8143 43.8225C37.1594 46.3037 40.0756 48.5618 43.8504 50.4908C44.1303 50.6269 44.395 50.6269 44.6333 50.5324C44.9927 50.3962 45.3595 50.0974 45.7189 49.7381C45.9988 49.4582 46.3467 49.0119 46.7098 48.5239C48.1623 46.6139 49.9589 44.2423 52.4969 45.43C52.5536 45.4564 52.5952 45.4867 52.6519 45.5094L61.1169 50.3773C61.1433 50.3924 61.1736 50.4189 61.1963 50.434C62.3121 51.2019 62.7735 52.3857 62.7849 53.7285C62.7849 55.0939 62.2818 56.6295 61.5443 57.9269C60.5684 59.6403 59.1311 60.775 57.4744 61.5239C55.8972 62.2501 54.1422 62.6397 52.4552 62.8893C49.8076 63.2789 47.3264 63.0293 44.7884 62.2501C42.3072 61.4823 39.807 60.2152 37.0762 58.5283L36.8757 58.3997C35.6238 57.6167 34.2697 56.7808 32.9421 55.7936C28.0855 52.1247 23.1344 46.8257 19.9081 40.9933C17.2037 36.0989 15.7285 30.8149 16.5342 25.7806C16.9805 23.0195 18.1644 20.508 20.2296 18.8513C22.03 17.3989 24.4544 16.6046 27.5938 16.8845C27.9531 16.911 28.2746 17.119 28.4448 17.4292L33.8725 26.6052C34.6668 27.634 34.7652 28.6552 34.3302 29.6764C33.9709 30.5124 33.2446 31.284 32.2537 32.0026C31.9624 32.2522 31.6145 32.5057 31.2476 32.7704C30.0334 33.6517 28.6529 34.6692 29.1257 35.8644L29.1143 35.8341Z" fill="white"></path><defs><lineargradient gradientunits="userSpaceOnUse" id="paint0_linear_2307_1533" x1="40.1718" x2="39.5497" y1="73.9368" y2="0.759766"><stop stop-color="#0AD318"></stop><stop offset="1" stop-color="#8DFF74"></stop></lineargradient></defs></svg>
                    Call
                </button>
    <button class="grid-button" id="review-button">
    <img alt="Review" class="button-icon" src="ReviewUs.png"/>
                    Review Us
                </button>
    <button class="grid-button" id="maps-button">
    <svg class="mx-auto mb-1 h-20 w-20 drop-shadow-xl" fill="none" height="80" viewbox="0 0 80 80" width="80" xmlns="http://www.w3.org/2000/svg"><path d="M64.4804 77.9004C47.7169 79.6896 30.9026 79.6896 14.1391 77.9004C7.45472 77.187 2.17505 71.9073 1.46164 65.2224C-0.327547 48.4589 -0.327547 31.6451 1.46164 14.8816C2.17505 8.19727 7.45472 2.9176 14.1391 2.2042C30.9026 0.415007 47.7163 0.415007 64.4798 2.2042C71.1648 2.9176 76.4445 8.19727 77.1579 14.8816C78.947 31.6451 78.947 48.4589 77.1579 65.2224C76.4445 71.9073 71.1654 77.187 64.4804 77.9004Z" fill="white"></path><path d="M44.9239 15.9894C43.1595 15.4319 41.2347 15.1133 39.2697 15.1133C33.6156 15.1133 28.5229 17.6621 25.1144 21.6844L33.8562 28.9724L44.9239 15.9894Z" fill="#1A73E8"></path><path d="M25.114 21.6843C22.4273 24.8703 20.7832 29.0121 20.7832 33.4725C20.7832 36.9373 21.4649 39.7251 22.6278 42.2341L33.8559 28.9723L25.114 21.6843Z" fill="#EA4335"></path><path d="M39.3102 26.4632C43.24 26.4632 46.4079 29.6094 46.4079 33.5123C46.4079 35.2248 45.7663 36.8178 44.7237 38.0523C44.7237 38.0523 50.2976 31.4414 55.7513 25.0295C53.5057 20.7284 49.6159 17.4628 44.9242 15.9893L33.8566 28.9722C35.1799 27.4589 37.1047 26.4632 39.3102 26.4632Z" fill="#4285F4"></path><path d="M39.3097 40.5217C35.3799 40.5217 32.212 37.3755 32.212 33.4726C32.212 31.7602 32.8135 30.1672 33.8561 28.9724L22.6281 42.2342C24.5529 46.4556 27.7609 49.8806 31.0491 54.1418L44.7233 38.0127C43.3999 39.5659 41.4751 40.5217 39.3097 40.5217Z" fill="#FBBC04"></path><path d="M44.4829 58.6021C50.6583 49.0042 57.8362 44.6633 57.8362 33.5123C57.8362 30.4457 57.0743 27.5783 55.751 25.0295L31.0493 54.1417C32.0919 55.4957 33.1746 57.0489 34.2172 58.6419C37.9866 64.4165 36.944 67.8415 39.3501 67.8415C41.7561 67.8415 40.7135 64.3767 44.4829 58.6021Z" fill="#34A853"></path></svg>
                    Maps
                </button>
    <button class="grid-button" id="contactcard-button">
    <svg class="mx-auto mb-1 h-20 w-20 drop-shadow-xl" fill="none" height="80" viewbox="0 0 80 80" width="80" xmlns="http://www.w3.org/2000/svg"><path d="M65.1097 77.8916C48.3462 79.6808 31.5319 79.6808 14.7683 77.8916C8.08399 77.1782 2.80432 71.8985 2.09092 65.2136C0.301725 48.4501 0.301725 31.6363 2.09092 14.8728C2.80432 8.18848 8.08399 2.90881 14.7683 2.19541C31.5319 0.406218 48.3456 0.406218 65.1091 2.19541C71.7941 2.90881 77.0737 8.18848 77.7871 14.8728C79.5763 31.6363 79.5763 48.4501 77.7871 65.2136C77.0737 71.8985 71.7946 77.1782 65.1097 77.8916Z" fill="#E0E2E2"></path><mask height="80" id="mask0_467_8843" maskunits="userSpaceOnUse" width="80" x="0" y="0"><path d="M65.1097 77.8916C48.3462 79.6808 31.5319 79.6808 14.7683 77.8916C8.08399 77.1782 2.80432 71.8985 2.09092 65.2136C0.301725 48.4501 0.301725 31.6363 2.09092 14.8728C2.80432 8.18848 8.08399 2.90881 14.7683 2.19541C31.5319 0.406218 48.3456 0.406218 65.1091 2.19541C71.7941 2.90881 77.0737 8.18848 77.7871 14.8728C79.5763 31.6363 79.5763 48.4501 77.7871 65.2136C77.0737 71.8985 71.7946 77.1782 65.1097 77.8916Z" fill="#E0E2E2"></path></mask><g mask="url(#mask0_467_8843)"><path d="M20.8148 79.8579C16.8052 79.7388 15.0118 79.5034 12.7174 78.7952C9.44387 77.7847 6.4155 75.5626 4.41947 72.7067C3.8067 71.8299 2.88672 70.123 2.88672 69.8629C2.88672 69.5238 8.26044 67.1692 11.7649 65.9727C13.0322 65.5401 15.3753 64.8355 16.034 64.689C16.5167 64.5816 18.7388 63.9396 19.9456 63.5589C21.7334 62.9948 22.6999 62.4412 23.0426 61.7848C23.1961 61.4909 23.564 59.7037 23.7512 58.3424C23.8041 57.9577 23.8975 57.3041 23.9588 56.8898C24.1502 55.5958 24.1173 55.3234 23.7184 54.8993C22.3098 53.4016 21.6975 51.9627 21.3601 49.358C21.1921 48.0614 20.7285 45.7754 20.5646 45.4354C20.492 45.2848 20.1811 45.028 19.8736 44.8645C19.0521 44.4278 18.7049 43.8275 18.4898 42.4717C18.332 41.4771 18.1644 40.8902 17.5791 39.2834C17.1782 38.1827 16.9873 37.0912 17.0279 36.1312C17.0613 35.3431 17.1013 35.1889 17.3379 34.9383C17.5767 34.6853 17.6666 34.6582 18.0827 34.714C18.4697 34.7659 18.5448 34.7488 18.495 34.6202C18.1548 33.7423 17.6743 29.6654 17.3707 25.0803C17.2671 23.516 17.63 21.7822 18.3998 20.1629C19.0284 18.8409 19.7628 18.0579 20.6832 17.7286C20.9647 17.6278 21.3418 17.4906 21.5211 17.4235C21.7004 17.3565 22.152 17.0006 22.5248 16.6326C23.9535 15.2221 25.17 14.487 27.1344 13.8469C27.812 13.6261 28.8633 13.2584 29.4706 13.0299C30.9758 12.4635 31.9535 12.2689 33.3645 12.2548C35.2413 12.2361 36.4128 12.5045 39.1775 13.5866C40.0441 13.9257 41.2664 14.3544 41.8939 14.5391C44.257 15.2349 45.6379 16.1455 46.3485 17.4765C46.5476 17.8495 46.9004 18.4401 47.1326 18.7889C47.9132 19.9619 48.0772 20.4026 48.3582 22.082C48.8519 25.032 48.6057 29.0197 47.6838 33.0031C47.3066 34.633 47.2847 34.7785 47.4166 34.7785C47.4796 34.7785 47.5614 34.7301 47.5983 34.6709C47.7122 34.4884 48.1424 34.5517 48.3994 34.7888C48.7714 35.1321 48.8741 35.4998 48.8769 36.5001C48.8801 37.5893 48.6486 38.713 48.0904 40.3198C47.8642 40.9707 47.6247 41.9073 47.5582 42.4011C47.3949 43.6136 46.9417 44.4724 46.3099 44.7669C46.0624 44.8823 45.7762 45.0684 45.6739 45.1806C45.2977 45.5933 45.0365 46.717 44.4408 50.4857C44.1468 52.3458 43.6202 53.5021 42.5288 54.6841L41.9824 55.2759L42.0364 56.6746C42.112 58.6333 42.4883 61.0522 42.8258 61.7479C43.4107 62.9539 44.6759 63.5279 49.4267 64.7426C55.0371 66.177 57.6198 67.0748 62.6139 69.327C62.8646 69.44 63.3781 69.5325 63.4411 69.5325L63.4531 79.3741C63.1946 79.5323 60.9726 79.7681 57.7576 79.8605C53.7522 79.9756 24.7091 79.9735 20.8148 79.8579L20.8148 79.8579Z" fill="#9A9A9A"></path><path d="M62.8892 0.853516C63.0444 0.879987 63.199 0.908267 63.3529 0.938333C63.9684 1.0586 64.5728 1.20743 65.1647 1.38334C65.7565 1.55925 66.3357 1.76224 66.9006 1.9908C67.4656 2.21937 68.0164 2.47352 68.5515 2.75175C69.0865 3.02999 70.4325 2.66624 70.9345 2.99115C71.4365 3.31606 71.8938 3.69137 72.3596 4.05997C72.8254 4.42857 73.2723 4.81827 73.6988 5.22756C74.1254 5.63686 75.182 5.7506 75.5661 6.19761C75.9502 6.64461 75.94 7.49725 76.2786 7.97897C76.6172 8.4607 77.0575 8.89061 77.3474 9.40406C77.6374 9.91751 78.1781 10.6432 78.4162 11.1854C78.6544 11.7276 78.1358 12.6031 78.3191 13.171C78.5024 13.739 78.6472 14.5137 78.7725 15.1044C78.8978 15.6951 78.2549 16.2193 78.3191 16.8298C78.3834 17.4402 78.4162 18.0599 78.4162 18.6871V19.9045L62.8892 19.9045V10.651V0.853516Z" fill="#C9C8C4"></path><path d="M68.6113 14.6028L70.2561 10.498H70.8639L72.616 14.6028H71.9679L71.4718 13.3589H69.684L69.2147 14.6028H68.6113ZM69.8449 12.9171H71.2975L70.8505 11.7805C70.7015 11.4002 70.6002 11.1171 70.5466 10.9313C70.493 11.1943 70.4155 11.4545 70.3142 11.7119L69.8449 12.9171Z" fill="#676362"></path><path d="M78.4162 19.8712L79.1288 21.5171C79.1288 27.7565 79.4851 33.5384 79.4851 39.7778H62.8892V30.2299V19.8711L78.4162 19.8712Z" fill="#4FC9F8"></path><path d="M69.0327 32.259V28.1543H70.6373C71.1319 28.1543 71.4917 28.258 71.7166 28.4653C71.9416 28.6726 72.0541 28.9192 72.0541 29.2051C72.0541 29.5969 71.8544 29.8871 71.4552 30.0758C71.9945 30.2274 72.2641 30.5591 72.2641 31.0709C72.2641 31.863 71.7308 32.259 70.6641 32.259H69.0327ZM69.6003 29.8785H70.5255C70.7341 29.8785 70.9047 29.865 71.0373 29.8378C71.1699 29.8106 71.2801 29.7492 71.368 29.6534C71.4559 29.5576 71.4999 29.4296 71.4999 29.2695C71.4999 29.1036 71.4604 28.9714 71.3814 28.8727C71.3024 28.7741 71.1929 28.7105 71.0529 28.6819C70.9129 28.6533 70.7132 28.639 70.454 28.639H69.6003V29.8785ZM69.6003 31.7743H70.6641C70.8041 31.7743 70.9278 31.7679 71.035 31.755C71.1423 31.7422 71.2481 31.7086 71.3524 31.6542C71.4567 31.5999 71.5364 31.5234 71.5915 31.4248C71.6466 31.3261 71.6742 31.2082 71.6742 31.0709C71.6742 30.8479 71.5997 30.6742 71.4507 30.5498C71.3017 30.4254 71.0142 30.3632 70.5881 30.3632H69.6003V31.7743Z" fill="#1C627A"></path><path d="M79.8413 39.6948L80.1976 45.0311C80.1976 50.3924 79.1288 53.2083 79.1288 58.5695L78.4162 59.7994L62.8892 59.7995V49.7995V39.6948H79.8413Z" fill="#47D86F"></path><path d="M71.945 50.5974L72.5126 50.7347C72.2683 51.6497 71.6768 52.1072 70.7382 52.1072C70.05 52.1072 69.5434 51.9006 69.2186 51.4874C68.8938 51.0742 68.7314 50.5631 68.7314 49.954C68.7314 49.2621 68.9251 48.7409 69.3125 48.3907C69.6998 48.0404 70.1781 47.8652 70.7472 47.8652C71.6321 47.8652 72.1953 48.2627 72.4366 49.0576L71.8824 49.1863C71.6917 48.6144 71.3103 48.3285 70.7382 48.3285C70.2764 48.3285 69.9233 48.4714 69.679 48.7574C69.4347 49.0433 69.3125 49.4422 69.3125 49.954C69.3125 50.546 69.4443 50.9756 69.708 51.2429C69.9717 51.5103 70.3002 51.644 70.6936 51.644C71.3699 51.644 71.7871 51.2951 71.945 50.5974Z" fill="#10782D"></path><path d="M78.4162 59.7993V61.3996C78.4162 62.0268 78.3834 62.6465 78.3191 63.2569C78.2549 63.8674 78.1594 64.4687 78.0341 65.0594C77.9087 65.6501 78.5024 67.0855 78.3191 67.6535C78.1358 68.2214 77.5856 68.8935 77.3474 69.4357C77.1093 69.9779 76.9248 71.0284 76.6349 71.5418C76.345 72.0553 76.2609 72.6948 75.9223 73.1766C75.5838 73.6583 74.8813 73.4421 74.4972 73.8891C74.1132 74.3361 73.8549 75.2612 73.4284 75.6705C73.0019 76.0798 72.1129 75.6581 71.6471 76.0267C71.1813 76.3953 71.0802 76.4144 70.5782 76.7393C70.0763 77.0642 69.0865 77.0567 68.5515 77.335C68.0164 77.6132 67.4656 77.8673 66.9006 78.0959C66.3357 78.3245 65.7565 78.5275 65.1647 78.7034C64.5728 78.8793 63.9684 79.0281 63.3529 79.1484C63.199 79.1784 63.0444 79.2067 62.8892 79.2332V69.4357V59.7994L78.4162 59.7993Z" fill="#FF9327"></path><path d="M69.0509 69.9602V65.8555H70.5258C70.8059 65.8555 71.0554 65.874 71.2745 65.9112C71.4934 65.9484 71.7035 66.0435 71.9047 66.1965C72.1058 66.3494 72.2696 66.5682 72.3963 66.8527C72.5229 67.1372 72.5862 67.4811 72.5862 67.8842C72.5862 68.5019 72.4335 69.0023 72.1281 69.3854C71.8227 69.7686 71.311 69.9602 70.5929 69.9602H69.0509ZM69.6185 69.4755H70.5303C70.9057 69.4755 71.1933 69.4226 71.3929 69.3168C71.5925 69.211 71.7445 69.0344 71.8488 68.7871C71.9531 68.5398 72.0052 68.2359 72.0052 67.8757C72.0052 67.624 71.9791 67.4039 71.927 67.2151C71.8749 67.0264 71.7966 66.8677 71.6924 66.739C71.5881 66.6104 71.4555 66.5117 71.2946 66.4431C71.1337 66.3745 70.8744 66.3401 70.5169 66.3401H69.6185V69.4755Z" fill="#884308"></path></g></svg>
                    Contact Card
                </button>
    </div>
    </div>
    <div id="loading-screen">
    <div class="spinner"></div>
    <div id="loading-text">Loading 3D Menu...</div>
    </div>
    <button class="back-button" id="back-button">Back</button>
    <div class="scroll-arrow" id="scroll-left">❮</div>
    <div class="scroll-arrow" id="scroll-right">❯</div>
    <div id="bottom-ui">
    <div id="model-info">
    <div id="model-name">Loading...</div>
    <div id="model-price">Loading...</div>
    </div>
    </div>
    <a-scene embedded="">
    <a-assets id="dynamic-assets"></a-assets>
    <a-entity id="cameraRig">
    <a-camera look-controls="enabled: false" position="0 1.6 0"></a-camera>
    </a-entity>
    <a-entity id="model-container" position="0 1.6 -2">
    <a-entity drag-rotate="" id="model-parent" position="0 0 0" scale="5 5 5">
    <!-- Models will be added here -->
    </a-entity>
    </a-entity>
    <a-entity environment="preset: default; groundColor: #445; grid: none"></a-entity>
    </a-scene>
<script>
        // Register drag-rotate component
        AFRAME.registerComponent('drag-rotate', {
            schema: {
                speed: { type: 'number', default: 0.5 }
            },
            init: function () {
                this.pitch = THREE.MathUtils.degToRad(30);
                this.yaw = 0;
                this.dragging = false;
                this.startX = 0;
                this.startY = 0;
                this.updateRotation();

                this.onMouseDown = (e) => {
                    this.dragging = true;
                    this.startX = e.clientX;
                    this.startY = e.clientY;
                };

                this.onMouseMove = (e) => {
                    if (!this.dragging) return;
                    const dx = e.clientX - this.startX;
                    const dy = e.clientY - this.startY;

                    this.yaw += dx * 0.02 * this.data.speed;
                    this.pitch += dy * 0.02 * this.data.speed;

                    this.pitch = THREE.MathUtils.clamp(this.pitch, THREE.MathUtils.degToRad(-90), THREE.MathUtils.degToRad(90));

                    this.startX = e.clientX;
                    this.startY = e.clientY;
                    this.updateRotation();
                };

                this.onMouseUp = () => { this.dragging = false; };

                this.onTouchStart = (e) => {
                    if (e.touches.length === 1) {
                        this.dragging = true;
                        this.startX = e.touches[0].clientX;
                        this.startY = e.touches[0].clientY;
                    }
                };

                this.onTouchMove = (e) => {
                    if (!this.dragging || e.touches.length !== 1) return;
                    const dx = e.touches[0].clientX - this.startX;
                    const dy = e.touches[0].clientY - this.startY;

                    this.yaw += dx * 0.02 * this.data.speed;
                    this.pitch += dy * 0.02 * this.data.speed;

                    this.pitch = THREE.MathUtils.clamp(this.pitch, THREE.MathUtils.degToRad(-90), THREE.MathUtils.degToRad(90));

                    this.startX = e.touches[0].clientX;
                    this.startY = e.touches[0].clientY;
                    this.updateRotation();
                };

                this.onTouchEnd = () => { this.dragging = false; };

                window.addEventListener('mousedown', this.onMouseDown);
                window.addEventListener('mousemove', this.onMouseMove);
                window.addEventListener('mouseup', this.onMouseUp);
                window.addEventListener('touchstart', this.onTouchStart, { passive: false });
                window.addEventListener('touchmove', this.onTouchMove, { passive: false });
                window.addEventListener('touchend', this.onTouchEnd);
            },
            updateRotation: function () {
                this.el.object3D.rotation.set(this.pitch, this.yaw, 0);
            },
            remove: function () {
                window.removeEventListener('mousedown', this.onMouseDown);
                window.removeEventListener('mousemove', this.onMouseMove);
                window.removeEventListener('mouseup', this.onMouseUp);
                window.removeEventListener('touchstart', this.onTouchStart);
                window.removeEventListener('touchmove', this.onTouchMove);
                window.removeEventListener('touchend', this.onTouchEnd);
            }
        });

        // Main application
        document.addEventListener('DOMContentLoaded', function() {
            const welcomeScreen = document.getElementById("welcome-screen");
            const viewPdfButton = document.getElementById("view-pdf-button");
            const view3dButton = document.getElementById("menu-3d-button");
            const whatsappButton = document.getElementById("whatsapp-button");
            const instagramButton = document.getElementById("instagram-button");
            const mailButton = document.getElementById("mail-button");
            const callButton = document.getElementById("call-button");
            const reviewButton = document.getElementById("review-button");
            const mapsButton = document.getElementById("maps-button");
            const contactCardButton = document.getElementById("contactcard-button");
            const scrollLeftBtn = document.getElementById("scroll-left");
            const scrollRightBtn = document.getElementById("scroll-right");
            const backButton = document.getElementById("back-button");
            const modelName = document.getElementById("model-name");
            const modelPrice = document.getElementById("model-price");
            const assets = document.getElementById("dynamic-assets");
            const modelParent = document.getElementById("model-parent");
            const loadingScreen = document.getElementById("loading-screen");
            const loadingText = document.getElementById("loading-text");
            const scene = document.querySelector("a-scene");
            const bottomUI = document.getElementById("bottom-ui");

            let modelData = [];
            let currentModelIndex = 0;
            let modelEntities = [];
            let modelsLoaded = false;

            const ZOOM_MIN = 5;
            const ZOOM_MAX = 12;
            const ZOOM_DEFAULT = 5;
            let zoomFactor = ZOOM_DEFAULT;

            // Initialize the app
            async function initApp() {
                // Show loading screen while loading models
                loadingScreen.style.display = 'flex';
                
                // Load model data and create model entities
                modelData = await fetchGoogleSheetCSV();
                
                if (modelData.length > 0) {
                    // Create all model entities but keep them hidden
                    await createModelEntities(modelData);
                    modelsLoaded = true;
                    
                    viewPdfButton.addEventListener('click', () => {
                        // Open PDF in new tab
                        window.open(modelData[currentModelIndex].pdfUrl || 'https://drive.google.com/file/d/1Au9lHxpezua6WbAT0c2HvfV2VgRNxM-U/view?usp=sharing', '_blank');
                    });

                    view3dButton.addEventListener('click', () => {
                        // Hide welcome screen and show 3D viewer
                        welcomeScreen.style.display = 'none';
                        show3DViewer();
                    });

                    // Set up WhatsApp button click handler
                    whatsappButton.addEventListener('click', () => {
                        const phoneNumber = '12345478650'; 
                        const message = 'Hello, I have a question about your products';
                        window.open(`https://wa.me/${+918228954751}?text=${encodeURIComponent(message)}`, '_blank');
                    });

                    instagramButton.addEventListener('click', () => {
                        window.open('https://www.instagram.com/theartisanstable.srt/', '_blank');
                    });
                    
                    mailButton.addEventListener('click', () => {
                        window.location.href = 'mailto:artisanstable@gmail.com';
                    });
                    
                    callButton.addEventListener('click', () => {
                        window.location.href = 'tel:+918128955751';
                    });

                    reviewButton.addEventListener('click', () => {
                        // Link to Google Review Page
                        window.open('https://www.google.com/search?sca_esv=a39b70e8861fd680&si=APYL9bs7Hg2KMLB-4tSoTdxuOx8BdRvHbByC_AuVpNyh0x2KzQQslIoW1mNeQsU0H6ECd7GUg239yPDmBTAQxgc1wjuYaIDefAA0sWjOonUMqhCa4EPAUM_Cjgbhv-WkGlp3FvviwC3Xe_-ZQhGk0_8GTDD-uOdWbg%3D%3D&q=The+Artisan%27s+Table+Reviews&sa=X&ved=2ahUKEwiVo9HhsuGMAxU8wjgGHQEwIcMQ0bkNegQILhAD&cshid=1744973124229684&biw=1536&bih=747&dpr=1.25#lrd=0x3be05320b5dbf477:0x96f3b9cb64211979,3,,,,', '_blank');
                    });
                    
                    mapsButton.addEventListener('click', () => {
                        // Link to Google Maps location
                        window.open('https://maps.app.goo.gl/YnAzv92zmnZgu4BD6', '_blank');
                    });
                    
                    contactCardButton.addEventListener('click', () => {
                        // Link to VCF/Contact page or contact info
                   window.open("The Artisan's Table.vcf", '_blank');
                    });
                    
                    loadingScreen.style.display = 'none';
                } else {
                    loadingText.textContent = "No models available";
                    viewPdfButton.disabled = true;
                    view3dButton.disabled = true;
                    viewPdfButton.textContent = "No Models Available";
                    view3dButton.textContent = "No Models Available";
                }
            }

            // Update visible model
            function updateVisibleModel() {
                modelEntities.forEach((model, i) => {
                    model.setAttribute('visible', i === currentModelIndex);
                });

                if (modelData[currentModelIndex]) {
                    modelName.textContent = modelData[currentModelIndex].name;
                    modelPrice.textContent = modelData[currentModelIndex].price;
                }

                // Reset zoom and rotation
                zoomFactor = ZOOM_DEFAULT;
                modelParent.setAttribute('scale', `${zoomFactor} ${zoomFactor} ${zoomFactor}`);
                
                const comp = modelParent.components['drag-rotate'];
                if (comp) {
                    comp.pitch = THREE.MathUtils.degToRad(45);
                    comp.yaw = 0;
                    comp.updateRotation();
                }
            }

            // Set up button events
            function setupButtonEvents() {
                const changeModel = (dir) => {
                    currentModelIndex = (currentModelIndex + dir + modelEntities.length) % modelEntities.length;
                    updateVisibleModel();
                };

                scrollLeftBtn.addEventListener("click", () => changeModel(-1));
                scrollRightBtn.addEventListener("click", () => changeModel(1));
                
                // Add back button event
                backButton.addEventListener("click", () => {
                    // Hide 3D viewer and show welcome screen
                    scene.classList.remove('active');
                    scrollLeftBtn.classList.remove('active');
                    scrollRightBtn.classList.remove('active');
                    bottomUI.style.display = 'none';
                    backButton.classList.remove('active');
                    welcomeScreen.style.display = 'flex';
                });
            }

            // Fetch model data from Google Sheets
            async function fetchGoogleSheetCSV() {
                loadingText.textContent = "Fetching model data...";
                
                try {
                    const proxy = "https://api.allorigins.win/raw?url=";
                    const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTKjBezjVa5ZwSJrTxN3rsgZ8GIT3h9ySMyKqEfV1SkSMAge3OPyvh_r9-eK6JQAKza4i0S-0puOo64/pub?gid=0&single=true&output=csv";
                    const response = await fetch(proxy + encodeURIComponent(sheetUrl));
                    const text = await response.text();
                    const results = Papa.parse(text, { header: true });
                    
                    return results.data.map(row => {
                        return {
                            name: row['Model Name'] || 'Unknown',
                            price: row['Price'] || 'N/A',
                            url: row['Model URL'] || '',
                            pdfUrl: row['PDF URL'] || ''
                        };
                    }).filter(model => model.url || model.pdfUrl);
                } catch (error) {
                    console.error("Error loading model data:", error);
                    loadingText.textContent = "Error loading data. Please try again.";
                    return [];
                }
            }

            // Create model entities
            function createModelEntities(models) {
                return new Promise((resolve) => {
                    let loadedCount = 0;
                    const totalModels = models.filter(model => model.url).length;
                    
                    if (totalModels === 0) {
                        resolve();
                        return;
                    }
                    
                    modelEntities = models.map((model, index) => {
                        if (!model.url) {
                            return null;
                        }

                        const assetId = `model-${index}`;
                        const assetItem = document.createElement('a-asset-item');
                        assetItem.setAttribute('id', assetId);
                        assetItem.setAttribute('src', model.url);
                        assets.appendChild(assetItem);

                        const entity = document.createElement('a-entity');
                        entity.setAttribute('gltf-model', `#${assetId}`);
                        entity.setAttribute('position', '0 0 0');
                        entity.setAttribute('visible', 'false');
                        entity.setAttribute('class', 'model-entity');
                        
                        entity.addEventListener('model-loaded', () => {
                            loadedCount++;
                            loadingText.textContent = `Loading models (${loadedCount}/${totalModels})...`;
                            
                            if (loadedCount === totalModels) {
                                resolve();
                            }
                        });
                        
                        entity.addEventListener('error', () => {
                            console.error(`Failed to load model: ${model.url}`);
                            loadedCount++;
                            if (loadedCount === totalModels) {
                                resolve();
                            }
                        });
                        
                        modelParent.appendChild(entity);
                        return entity;
                    }).filter(entity => entity !== null);
                });
            }

            // Show 3D viewer
            function show3DViewer() {
                // Make scene visible
                scene.classList.add('active');
                
                // Setup UI elements
                setupButtonEvents();
                scrollLeftBtn.classList.add('active');
                scrollRightBtn.classList.add('active');
                bottomUI.style.display = 'flex';
                backButton.classList.add('active');
                
                // Show the first model
                updateVisibleModel();
            }

            // Zoom functions
            function applyZoom() {
                zoomFactor = Math.max(ZOOM_MIN, Math.min(ZOOM_MAX, zoomFactor));
                modelParent.setAttribute('scale', `${zoomFactor} ${zoomFactor} ${zoomFactor}`);
            }

            function zoomIn() {
                zoomFactor *= 1.1;
                applyZoom();
            }

            function zoomOut() {
                zoomFactor /= 1.1;
                applyZoom();
            }

            // Event listeners for zoom
            window.addEventListener('wheel', (e) => {
                e.preventDefault();
                if (e.deltaY < 0) zoomIn();
                else zoomOut();
            }, { passive: false });

            let initialPinchDistance = null;
            window.addEventListener('touchstart', (e) => {
                if (e.touches.length === 2) {
                    const dx = e.touches[0].clientX - e.touches[1].clientX;
                    const dy = e.touches[0].clientY - e.touches[1].clientY;
                    initialPinchDistance = Math.sqrt(dx * dx + dy * dy);
                }
            });

            window.addEventListener('touchmove', (e) => {
                if (e.touches.length === 2 && initialPinchDistance) {
                    e.preventDefault();
                    const dx = e.touches[0].clientX - e.touches[1].clientX;
                    const dy = e.touches[0].clientY - e.touches[1].clientY;
                    const currentPinchDistance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (currentPinchDistance > initialPinchDistance * 1.05) zoomIn();
                    else if (currentPinchDistance < initialPinchDistance * 0.95) zoomOut();
                    
                    initialPinchDistance = currentPinchDistance;
                }
            }, { passive: false });

            // Start the application
            initApp();
        });
    </script>
</div></body>
</html>
